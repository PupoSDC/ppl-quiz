###############################################################################
# Global question banks #######################################################
###############################################################################

type QuestionBlock
  @model
  @auth(rules: [{ allow: private, operations: [read] }]) {
  id: ID!
  code: String!
  name: String!
  questions: [Question!]!
    @connection(keyName: "questionsByQuestionBlock", fields: ["id"])
}

type Question
  @model
  @key(name: "questionsByQuestionBlock", fields: ["questionBlockId"])
  @auth(rules: [{ allow: private, operations: [read] }]) {
  id: ID!
  questionBlockId: ID!
  correctAnswerId: String!
  question: String!
  answers: [Answer!]!
  image: String
  explanation: String
}

type Answer {
  id: String
  answer: String
}

###############################################################################
# User created tests ##########################################################
###############################################################################

type Test @model @auth(rules: [{ allow: owner }]) {
  questions: [Question!]! @connection(limit: 200)
  answers: [Answer!]!
  finished: Boolean!
}
